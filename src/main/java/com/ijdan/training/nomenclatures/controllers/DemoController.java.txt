

package com.ijdan.training.nomenclatures.controllers;

import io.swagger.annotations.ApiParam;
import org.json.simple.JSONObject;
import org.springframework.web.bind.annotation.PathVariable;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RequestMethod;
import org.springframework.web.bind.annotation.RestController;

/**
 * Pour que ma classe soit considérée comme un REST endpoint, je lui rajoute l'annotation Spring suivante
 */
@RestController
/**
 * L'annotation ci-après permet de mapper mon contrôleur avec l'URI
 * Je traite donc la version 0.1 de mon service Nomenclature
 */
@RequestMapping(value = "/nomenclatures/v0.1/")
public class DemoController {
    /**
     * Il s'agit de la classe qui va contenir les points d'entrée aux opérations
    */

    /**
     * Mapper le complément d'url "/pays" sur la méthode ci-après
     * Je précise que le verbe est GET
     * GET http://mon-site-web.com/nomenclatures/v0.1/pays
     */
    @RequestMapping(value = "/pays", method = RequestMethod.GET)
    JSONObject getPays () {
        /**
         * J'enrichis le corps de ma méthode.
         * J'enrichis donc le résultat de l'appel au path (nommée aussi Opération) :
         * Je retourne un objet JSon
         * Pour être rigoureux, le type de retour de cette méthode devrait être Pays (au lieu de JSONObject)
         * Pays.class décrirait la structure de mon pays (nom, code_iso, langue...)
         */
        return structureListPaysEnJson;
    }


    /**
     * Mapper le complément d'url "/pays/{id}" sur la méthode ci-après
     * Je précise que le verbe est GET
     * GET http://mon-site-web.com/nomenclatures/v0.1/pays/1
     */
    @RequestMapping(value = "/pays/{id}", method = RequestMethod.GET)
    JSONObject getPaysById (@ApiParam(value = "identifiant de la ressource", required = true) @PathVariable String id) {
        /**
         * J'enrichis le corps de ma méthode pour retourner le détail d'une ressource
         */
        return structureListPaysEnJson;
    }

}
